<div class="col-12 filters">
    <p-toolbar styleClass="mb-4">
        <ng-template pTemplate="left">
            <div class="field grid">
                <div class="col-12 md:col-6">
                    <p-dropdown placeholder="Select Branch" [options]="branchList" optionLabel="name"
                     [(ngModel)]="selectedBranch" (onChange)="onBranchSelect($event)"></p-dropdown>
                </div>
            </div>
        </ng-template>
        <ng-template pTemplate="right">
            <div class="my-2">
            </div>
        </ng-template>
    </p-toolbar>
</div>
<div class="col-12 form-fields" *ngIf="!!selectedBranch">
    <div class="card">
        <h5 *ngIf="!!selectedBranch">Branch - <b>{{selectedBranch.name}}</b></h5>
        <div class="col-12 justify-content-end add-vehicle" *ngIf="!!selectedBranch?.id">
            <button pButton pRipple label="Add Vehicle" (click)="addVehicle()"></button>
        </div>
        <div class="p-fluid p-formgrid grid" *ngIf="!!vehicleDetails">
            <div class="field col-12 md:col-4">
                <label htmlFor="vehicleType">Vehicle Type *</label>
                <input pInputText id="vehicleType" type="text" [(ngModel)]="vehicleDetails.vehicleType" />
                <small *ngIf="!vehicleDetails.vehicleType && isFormSubmitted" id="vehicleType" class="p-error">Vehicle type is required.</small>
            </div>
            <div class="field col-12 md:col-4">
                <h5 class="status-label">Status</h5>
                <p-inputSwitch [(ngModel)]="vehicleDetails.active"></p-inputSwitch>
            </div>
        </div>
        <div class="flex flex-wrap gap-2 justify-content-end" *ngIf="!isEditVehicle && !!vehicleDetails">
            <button pButton pRipple label="Save" (click)="saveVehicle()"></button>
        </div>
        <div class="flex flex-wrap gap-2 justify-content-end" *ngIf="isEditVehicle && !!vehicleDetails">
            <button pButton pRipple label="Update" (click)="updateVehicle()"></button>
        </div>
        <div class="card mt-2" *ngIf="vechileTypeData?.length > 0">
            <p-table [value]="vechileTypeData" [paginator]="true" [rows]="5" [showCurrentPageReport]="true"
                [tableStyle]="{ 'min-width': '50rem' }" [columns]="cols"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                [rowsPerPageOptions]="[5, 10, 15]" styleClass="p-datatable-gridlines">
                <ng-template pTemplate="header">
                    <tr>
                        <th *ngFor="let col of cols">
                            {{ col.label }}
                        </th>
                        <th class="action-label">Action</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData let-columns="columns">
                    <tr>
                        <td *ngFor="let col of cols">
                            <span *ngIf="col.header != 'active'"> {{ rowData[col.header] }} </span>
                            <span *ngIf="col.header == 'active'"> {{ rowData[col.header] ? 'Active' : 'Inactive' }} </span>
                        </td>
                        <td>
                            <div class="flex vehicle-action">
                                <button pButton pRipple icon="pi pi-pencil"
                                    class="p-button-rounded p-button-success mr-2"
                                    (click)="editVehicle(rowData)">
                                </button>
                            </div>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>

<div *ngIf="isLoader" class="" style="height: 100%;">
    <app-loader></app-loader>
</div>

<div *ngIf="showDialog">
    <app-status-messsage [alertType]="alertType" [message]="statusMessage" [visible]="showDialog"
        (onCloseDialog)="closeAlertDialog($event)">
    </app-status-messsage>
</div>